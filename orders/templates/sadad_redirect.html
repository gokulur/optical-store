<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Redirecting to Sadad Paymentâ€¦</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#f5f4f0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif}
  .wrap{text-align:center;padding:48px 32px;background:#fff;border-radius:16px;box-shadow:0 8px 40px rgba(0,0,0,.08);max-width:440px;width:100%;margin:20px}
  .logo{font-size:42px;margin-bottom:20px}
  h1{font-size:22px;font-weight:700;color:#0f0f0f;margin-bottom:8px}
  p{font-size:15px;color:#6a6a6a;line-height:1.6;margin-bottom:28px}
  .spinner{width:48px;height:48px;border:4px solid #e5e7eb;border-top-color:#1a7a4a;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 24px}
  @keyframes spin{to{transform:rotate(360deg)}}
  .order-badge{display:inline-block;padding:6px 16px;background:#edf6f1;border:1px solid #b5ddc8;border-radius:20px;font-size:13px;font-weight:600;color:#1a7a4a;margin-bottom:24px}
  .manual-btn{margin-top:20px;padding:12px 28px;background:#1a1a1a;color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;font-family:inherit}
  .security{display:flex;align-items:center;justify-content:center;gap:6px;margin-top:20px;font-size:12px;color:#9ca3af}
</style>
</head>
<body>

<div class="wrap">
  <div class="logo">ðŸ’š</div>
  <div class="order-badge">Order #{{ order.order_number }}</div>
  <div class="spinner"></div>
  <h1>Redirecting to Sadad</h1>
  <p>Please wait while we securely redirect you to<br><strong>Sadad Payment Gateway</strong> to complete your payment.</p>

  <div class="security">
    <svg width="12" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
      <rect x="3" y="11" width="18" height="11" rx="2"/>
      <path d="M7 11V7a5 5 0 0110 0v4"/>
    </svg>
    256-bit SSL &bull; Secure payment
  </div>

  <button class="manual-btn" id="manualBtn" style="display:none" onclick="document.getElementById('sadadForm').submit()">
    Click here if not redirected automatically
  </button>
</div>

<!-- THE FORM â€” posts to Sadad -->
<form id="sadadForm" action="{{ action_url }}" method="POST" style="display:none">
  {% for name, value in form_fields.items %}
  <input type="hidden" name="{{ name }}" value="{{ value }}">
  {% endfor %}
</form>

<script>
  // Auto-submit immediately
  window.onload = function() {
    try {
      document.getElementById('sadadForm').submit();
    } catch(e) {
      document.getElementById('manualBtn').style.display = 'inline-block';
    }
  };

  // Show manual button after 4 seconds if redirect hasn't happened
  setTimeout(function() {
    document.getElementById('manualBtn').style.display = 'inline-block';
  }, 4000);
</script>
</body>
</html>