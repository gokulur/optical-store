{% extends 'catalog/base.html' %}{% block title %}My Coupons{% endblock %}{% block content %}
<div class="coupons-page"><div class="container"><h1>My Coupons</h1><section class="coupons-section"><h2>Available Coupons</h2>{% if available_coupons %}<div class="coupons-grid">{% for coupon in available_coupons %}<div class="coupon-card {% if not coupon.can_use %}disabled{% endif %}"><div class="coupon-header"><span class="coupon-code">{{ coupon.code }}</span>{% if coupon.discount_type == 'percentage' %}<span class="discount">{{ coupon.discount_value }}% OFF</span>{% elif coupon.discount_type == 'fixed_amount' %}<span class="discount">{{ coupon.discount_value }} QAR OFF</span>{% else %}<span class="discount">FREE SHIPPING</span>{% endif %}</div><div class="coupon-body"><p class="coupon-name">{{ coupon.name }}</p>{% if coupon.description %}<p class="coupon-desc">{{ coupon.description }}</p>{% endif %}{% if coupon.minimum_order_amount %}<p class="condition">Min. order: {{ coupon.minimum_order_amount }} QAR</p>{% endif %}<p class="validity">Valid until {{ coupon.valid_until|date:"M j, Y" }}</p></div>{% if coupon.can_use %}<button class="btn btn-primary btn-sm" onclick="copyCoupon('{{ coupon.code }}')">Copy Code</button>{% else %}<span class="badge unavailable">Not Available</span>{% endif %}</div>{% endfor %}</div>{% else %}<p>No coupons available</p>{% endif %}</section><section class="coupons-section"><h2>Coupon History</h2>{% if used_coupons %}<div class="history-list">{% for usage in used_coupons %}<div class="history-item"><div class="usage-info"><strong>{{ usage.coupon.code }}</strong><span>Order #{{ usage.order.order_number }}</span></div><div class="usage-details"><span class="discount">-{{ usage.discount_amount }} QAR</span><span class="date">{{ usage.created_at|date:"M j, Y" }}</span></div></div>{% endfor %}</div>{% else %}<p>No coupon usage history</p>{% endif %}</section></div></div>
<script>function copyCoupon(code){navigator.clipboard.writeText(code);alert('Coupon code copied: '+code);}</script>
{% endblock %}