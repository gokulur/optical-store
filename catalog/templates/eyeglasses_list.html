{% extends 'catalog/base.html' %}

{% block title %}Eyeglasses - Eyewear Store{% endblock %}

{% block content %}
<div class="product-listing-page">
    <!-- Page Header -->
    <div class="page-header">
        <h1>Eyeglasses</h1>
        <p>Find your perfect prescription eyeglasses</p>
    </div>
    
    <!-- Gender Filter -->
    <div class="gender-filter">
        <a href="?gender=all" class="{% if selected_gender == 'all' %}active{% endif %}">All</a>
        <a href="?gender=men" class="{% if selected_gender == 'men' %}active{% endif %}">For Him</a>
        <a href="?gender=women" class="{% if selected_gender == 'women' %}active{% endif %}">For Her</a>
        <a href="?gender=kids" class="{% if selected_gender == 'kids' %}active{% endif %}">For Kids</a>
    </div>
    
    <div class="listing-container">
        <!-- Sidebar Filters -->
        <aside class="filters-sidebar">
            <h3>Filters</h3>
            
            <!-- Brand Filter -->
            <div class="filter-group">
                <h4>Brand</h4>
                <ul>
                    {% for brand in brands %}
                    <li>
                        <label>
                            <input type="checkbox" name="brand" value="{{ brand.slug }}">
                            {{ brand.name }}
                        </label>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            
            <!-- Price Filter -->
            <div class="filter-group">
                <h4>Price Range</h4>
                <input type="range" name="min_price" min="0" max="3000">
                <input type="range" name="max_price" min="0" max="3000">
                <div class="price-display">
                    <span>0 QAR</span> - <span>3000 QAR</span>
                </div>
            </div>
            
            <!-- Frame Shape -->
            <div class="filter-group">
                <h4>Frame Shape</h4>
                <ul>
                    <li><label><input type="checkbox" name="shape" value="rectangle"> Rectangle</label></li>
                    <li><label><input type="checkbox" name="shape" value="round"> Round</label></li>
                    <li><label><input type="checkbox" name="shape" value="square"> Square</label></li>
                    <li><label><input type="checkbox" name="shape" value="aviator"> Aviator</label></li>
                    <li><label><input type="checkbox" name="shape" value="cat-eye"> Cat Eye</label></li>
                </ul>
            </div>
            
            <!-- Frame Material -->
            <div class="filter-group">
                <h4>Frame Material</h4>
                <ul>
                    <li><label><input type="checkbox" name="material" value="metal"> Metal</label></li>
                    <li><label><input type="checkbox" name="material" value="plastic"> Plastic</label></li>
                    <li><label><input type="checkbox" name="material" value="acetate"> Acetate</label></li>
                    <li><label><input type="checkbox" name="material" value="titanium"> Titanium</label></li>
                </ul>
            </div>
            
            <button class="clear-filters">Clear All Filters</button>
        </aside>
        
        <!-- Products Grid -->
        <div class="products-area">
            <!-- Toolbar -->
            <div class="products-toolbar">
                <div class="showing-count">
                    Showing {{ products.count }} products
                </div>
                <div class="sort-by">
                    <label>Sort by:</label>
                    <select name="sort">
                        <option value="-created_at">Newest</option>
                        <option value="base_price">Price: Low to High</option>
                        <option value="-base_price">Price: High to Low</option>
                        <option value="name">Name: A-Z</option>
                    </select>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div class="products-grid">
                {% for product in products %}
                <div class="product-card">
                    <a href="{% url 'catalog:eyeglass_detail' product.slug %}">
                        <div class="product-image">
                            {% if product.images.first %}
                            <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                            {% endif %}
                        </div>
                        <div class="product-info">
                            <p class="brand">{{ product.brand.name }}</p>
                            <h3 class="product-name">{{ product.name }}</h3>
                            <p class="gender">{{ product.get_gender_display }}</p>
                            <div class="price-section">
                                <span class="price">{{ product.base_price }} QAR</span>
                                {% if product.compare_at_price %}
                                <span class="compare-price">{{ product.compare_at_price }} QAR</span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                    <div class="product-actions">
                        <button class="select-lenses">Select Lenses</button>
                        <button class="wishlist">â™¡</button>
                    </div>
                </div>
                {% empty %}
                <p class="no-products">No products found matching your criteria.</p>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            <div class="pagination">
                <a href="#" class="prev">Previous</a>
                <a href="#" class="page active">1</a>
                <a href="#" class="page">2</a>
                <a href="#" class="page">3</a>
                <a href="#" class="next">Next</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}