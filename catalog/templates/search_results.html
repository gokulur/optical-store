<!-- search_results.html -->
{% extends 'catalog/base.html' %}

{% block title %}Search Results - {{ query }}{% endblock %}

{% block content %}
<div class="search-results-page">
    <!-- Search Header -->
    <div class="search-header">
        <h1>Search Results</h1>
        {% if query %}
        <p>Showing results for: <strong>"{{ query }}"</strong></p>
        <p class="result-count">{{ count }} product(s) found</p>
        {% endif %}
    </div>
    
    <!-- Search Bar -->
    <div class="search-bar-large">
        <form action="{% url 'catalog:search' %}" method="get">
            <input type="text" name="q" placeholder="Search products, brands..." value="{{ query }}">
            <button type="submit">Search</button>
        </form>
    </div>
    
    <!-- Recent Searches (if no query) -->
    {% if not query %}
    <div class="recent-searches">
        <h3>Recent Searches</h3>
        <ul>
            <li><a href="?q=ray-ban">Ray-Ban</a></li>
            <li><a href="?q=oakley">Oakley</a></li>
            <li><a href="?q=contact+lenses">Contact Lenses</a></li>
        </ul>
    </div>
    
    <!-- Popular Categories -->
    <div class="popular-categories">
        <h3>Popular Categories</h3>
        <ul>
            <li><a href="{% url 'catalog:sunglasses_list' %}">Sunglasses</a></li>
            <li><a href="{% url 'catalog:eyeglasses_list' %}">Eyeglasses</a></li>
            <li><a href="{% url 'catalog:contact_lenses_list' %}">Contact Lenses</a></li>
        </ul>
    </div>
    
    <!-- Popular Brands -->
    <div class="popular-brands">
        <h3>Popular Brands</h3>
        <ul>
            <li><a href="#">Ray-Ban</a></li>
            <li><a href="#">Oakley</a></li>
            <li><a href="#">Gucci</a></li>
            <li><a href="#">Prada</a></li>
        </ul>
    </div>
    {% endif %}
    
    <!-- Search Results -->
    {% if query and products %}
    <div class="search-results">
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <a href="{% url 'catalog:product_detail' product.slug %}">
                    <div class="product-image">
                        {% if product.images.first %}
                        <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                        {% endif %}
                    </div>
                    <div class="product-info">
                        <p class="brand">{{ product.brand.name }}</p>
                        <h3 class="product-name">{{ product.name }}</h3>
                        <p class="product-type">{{ product.get_product_type_display }}</p>
                        <div class="price-section">
                            <span class="price">{{ product.base_price }} QAR</span>
                            {% if product.compare_at_price %}
                            <span class="compare-price">{{ product.compare_at_price }} QAR</span>
                            {% endif %}
                        </div>
                    </div>
                </a>
                <div class="product-actions">
                    <button class="add-to-cart">Add to Cart</button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% elif query %}
    <div class="no-results">
        <h2>No results found for "{{ query }}"</h2>
        <p>Try searching with different keywords or browse our categories.</p>
        <div class="suggestions">
            <h3>Suggestions:</h3>
            <ul>
                <li>Check your spelling</li>
                <li>Use more general keywords</li>
                <li>Try searching by brand name</li>
            </ul>
        </div>
        <a href="{% url 'catalog:home' %}" class="btn">Back to Home</a>
    </div>
    {% endif %}
</div>
{% endblock %}


<!-- category_detail.html -->
{% extends 'catalog/base.html' %}

{% block title %}{{ category.name }} - Eyewear Store{% endblock %}

{% block content %}
<div class="category-page">
    <!-- Category Header -->
    <div class="category-header">
        {% if category.image %}
        <div class="category-banner">
            <img src="{{ category.image.url }}" alt="{{ category.name }}">
        </div>
        {% endif %}
        <div class="category-info">
            <h1>{{ category.name }}</h1>
            {% if category.description %}
            <p>{{ category.description }}</p>
            {% endif %}
        </div>
    </div>
    
    <!-- Gender Filter -->
    <div class="gender-filter">
        <a href="?gender=all" class="{% if selected_gender == 'all' %}active{% endif %}">All</a>
        <a href="?gender=men" class="{% if selected_gender == 'men' %}active{% endif %}">For Him</a>
        <a href="?gender=women" class="{% if selected_gender == 'women' %}active{% endif %}">For Her</a>
        <a href="?gender=kids" class="{% if selected_gender == 'kids' %}active{% endif %}">For Kids</a>
    </div>
    
    <!-- Subcategories (if any) -->
    {% if category.subcategories.all %}
    <div class="subcategories">
        <h2>Shop by Subcategory</h2>
        <div class="subcategories-grid">
            {% for subcategory in category.subcategories.all %}
            <div class="subcategory-card">
                <a href="{% url 'catalog:category_detail' subcategory.slug %}">
                    {% if subcategory.image %}
                    <img src="{{ subcategory.image.url }}" alt="{{ subcategory.name }}">
                    {% endif %}
                    <h3>{{ subcategory.name }}</h3>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Products -->
    <div class="category-products">
        <h2>{{ category.name }} Products</h2>
        
        <!-- Toolbar -->
        <div class="products-toolbar">
            <div class="showing-count">
                Showing {{ products.count }} products
            </div>
            <div class="sort-by">
                <label>Sort by:</label>
                <select name="sort" onchange="window.location.href='?sort=' + this.value + '&gender={{ selected_gender }}'">
                    <option value="-created_at">Newest</option>
                    <option value="base_price">Price: Low to High</option>
                    <option value="-base_price">Price: High to Low</option>
                    <option value="name">Name: A-Z</option>
                </select>
            </div>
        </div>
        
        {% if products %}
        <div class="products-grid">
            {% for product in products %}
            <div class="product-card">
                <a href="{% url 'catalog:product_detail' product.slug %}">
                    <div class="product-image">
                        {% if product.images.first %}
                        <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                        {% endif %}
                    </div>
                    <div class="product-info">
                        <p class="brand">{{ product.brand.name }}</p>
                        <h3 class="product-name">{{ product.name }}</h3>
                        <p class="gender">{{ product.get_gender_display }}</p>
                        <div class="price-section">
                            <span class="price">{{ product.base_price }} QAR</span>
                            {% if product.compare_at_price %}
                            <span class="compare-price">{{ product.compare_at_price }} QAR</span>
                            {% endif %}
                        </div>
                    </div>
                </a>
                <div class="product-actions">
                    <button class="add-to-cart">Add to Cart</button>
                    <button class="wishlist">â™¡</button>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="no-products">No products found in this category.</p>
        {% endif %}
        
        <!-- Pagination -->
        <div class="pagination">
            <a href="#" class="prev">Previous</a>
            <a href="#" class="page active">1</a>
            <a href="#" class="page">2</a>
            <a href="#" class="page">3</a>
            <a href="#" class="next">Next</a>
        </div>
    </div>
</div>
{% endblock %}