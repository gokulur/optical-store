{% extends 'base.html' %}

{% block title %}Our Locations - Eyewear Store{% endblock %}

{% block content %}
<div class="store-locations-page">
    <!-- Hero Section -->
    <div class="hero-section">
        <h1>Our Store Locations</h1>
        <p>Visit us at any of our convenient locations across Qatar</p>
    </div>
    
    <div class="locations-content">
        <div class="container">
            <!-- Map View -->
            <div class="map-section">
                <h2>Find Us on the Map</h2>
                <div class="map-container">
                    <!-- Google Maps embed or interactive map -->
                    <div id="locationsMap" style="width: 100%; height: 500px; background: #e0e0e0;">
                        <p>Google Maps will be embedded here</p>
                    </div>
                </div>
            </div>
            
            <!-- Locations List -->
            <div class="locations-list">
                <h2>All Locations</h2>
                
                {% if locations_by_city %}
                    {% for city, city_locations in locations_by_city.items %}
                    <div class="city-section">
                        <h3>{{ city }}</h3>
                        
                        <div class="locations-grid">
                            {% for location in city_locations %}
                            <div class="location-card">
                                <div class="location-header">
                                    <h4>{{ location.name }}</h4>
                                    {% if location.is_flagship %}
                                    <span class="badge flagship">Flagship Store</span>
                                    {% endif %}
                                    {% if location.offers_eye_test %}
                                    <span class="badge eye-test">Eye Test Available</span>
                                    {% endif %}
                                </div>
                                
                                <div class="location-details">
                                    <div class="detail-item">
                                        <strong>Address:</strong>
                                        <p>{{ location.address_line1 }}</p>
                                        {% if location.address_line2 %}
                                        <p>{{ location.address_line2 }}</p>
                                        {% endif %}
                                        <p>{{ location.city }}, {{ location.country }}</p>
                                        {% if location.postal_code %}
                                        <p>{{ location.postal_code }}</p>
                                        {% endif %}
                                    </div>
                                    
                                    <div class="detail-item">
                                        <strong>Phone:</strong>
                                        <p><a href="tel:{{ location.phone }}">{{ location.phone }}</a></p>
                                    </div>
                                    
                                    {% if location.email %}
                                    <div class="detail-item">
                                        <strong>Email:</strong>
                                        <p><a href="mailto:{{ location.email }}">{{ location.email }}</a></p>
                                    </div>
                                    {% endif %}
                                    
                                    <div class="detail-item">
                                        <strong>Operating Hours:</strong>
                                        {% if location.operating_hours %}
                                        <div class="operating-hours">
                                            {% for day, hours in location.operating_hours.items %}
                                            <div class="hours-row">
                                                <span class="day">{{ day|title }}:</span>
                                                <span class="hours">{{ hours }}</span>
                                            </div>
                                            {% endfor %}
                                        </div>
                                        {% else %}
                                        <p>Contact store for hours</p>
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <div class="location-actions">
                                    {% if location.google_maps_url %}
                                    <a href="{{ location.google_maps_url }}" target="_blank" class="btn btn-outline">
                                        Get Directions
                                    </a>
                                    {% endif %}
                                    
                                    {% if location.offers_eye_test %}
                                    <a href="{% url 'content:eye_test_booking' %}?location={{ location.id }}" class="btn btn-primary">
                                        Book Eye Test
                                    </a>
                                    {% endif %}
                                    
                                    <a href="{% url 'content:store_location_detail' location.pk %}" class="btn btn-outline">
                                        View Details
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                <p>No locations available at the moment.</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- CTA Section -->
    <div class="cta-section">
        <div class="container">
            <h2>Can't Visit Our Store?</h2>
            <p>Shop online and get your eyewear delivered to your doorstep</p>
            <a href="{% url 'catalog:home' %}" class="btn btn-large">Shop Online</a>
        </div>
    </div>
</div>

<script>
// Initialize Google Maps when page loads
function initMap() {
    // This would contain actual Google Maps initialization code
    // For now, it's a placeholder
    console.log('Map initialized');
}
</script>
{% endblock %}