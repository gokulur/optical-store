<!-- address_list.html -->
{% extends 'catalog/base.html' %}

{% block title %}My Addresses - Eyewear Store{% endblock %}

{% block content %}
<div class="addresses-page">
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>My Addresses</h1>
            <p>Manage your delivery and billing addresses</p>
        </div>
        
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <!-- Add New Address Button -->
        <div class="page-actions">
            <a href="{% url 'users:address_create' %}" class="btn btn-primary">
                â• Add New Address
            </a>
        </div>
        
        <!-- Addresses Grid -->
        {% if addresses %}
        <div class="addresses-grid">
            {% for address in addresses %}
            <div class="address-card {% if address.is_default_shipping or address.is_default_billing %}default{% endif %}">
                <div class="address-header">
                    <h3>{{ address.full_name }}</h3>
                    <div class="address-badges">
                        {% if address.is_default_shipping %}
                        <span class="badge default">Default Shipping</span>
                        {% endif %}
                        {% if address.is_default_billing %}
                        <span class="badge default">Default Billing</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="address-body">
                    <p class="address-line">{{ address.address_line1 }}</p>
                    {% if address.address_line2 %}
                    <p class="address-line">{{ address.address_line2 }}</p>
                    {% endif %}
                    <p class="address-line">{{ address.city }}{% if address.state %}, {{ address.state }}{% endif %}</p>
                    <p class="address-line">{{ address.country }}{% if address.postal_code %} {{ address.postal_code }}{% endif %}</p>
                    
                    <div class="address-contact">
                        <p>ğŸ“ {{ address.phone }}</p>
                    </div>
                    
                    <p class="address-type">Type: {{ address.get_address_type_display }}</p>
                </div>
                
                <div class="address-actions">
                    <a href="{% url 'users:address_edit' address.id %}" class="btn btn-sm btn-outline">
                        Edit
                    </a>
                    
                    {% if not address.is_default_shipping %}
                    <form method="post" action="{% url 'users:set_default_address' address.id %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="type" value="shipping">
                        <button type="submit" class="btn btn-sm btn-text">
                            Set as Default Shipping
                        </button>
                    </form>
                    {% endif %}
                    
                    {% if not address.is_default_billing %}
                    <form method="post" action="{% url 'users:set_default_address' address.id %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="type" value="billing">
                        <button type="submit" class="btn btn-sm btn-text">
                            Set as Default Billing
                        </button>
                    </form>
                    {% endif %}
                    
                    <form method="post" action="{% url 'users:address_delete' address.id %}" 
                          style="display:inline;"
                          onsubmit="return confirm('Are you sure you want to delete this address?');">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <!-- No Addresses -->
        <div class="empty-state">
            <div class="empty-icon">ğŸ“</div>
            <h2>No Saved Addresses</h2>
            <p>Add an address to make checkout faster and easier.</p>
            <a href="{% url 'users:address_create' %}" class="btn btn-primary">Add Your First Address</a>
        </div>
        {% endif %}
        
        <!-- Tips Section -->
        <div class="tips-section">
            <h2>Address Tips</h2>
            <ul>
                <li>Add multiple addresses for home, office, and other locations</li>
                <li>Set a default shipping address for faster checkout</li>
                <li>Separate billing addresses can be added for invoicing</li>
                <li>Make sure your phone number is correct for delivery updates</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
