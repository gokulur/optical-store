{% extends 'base.html' %}
{% block title %}Forgot Password — Al Ameen Optics{% endblock %}

{% block extra_styles %}
<style>
:root {
  --auth-accent:#1a6fa8;--auth-accent-dark:#155f90;--auth-gold:#c8a96e;
  --auth-border:#c5d8e8;--auth-muted:#6b8299;--auth-dark:#1a2a3a;
  --font-display:'Playfair Display',serif;--font-body:'Jost',sans-serif;
}
.auth-page { min-height:calc(100vh - 160px);display:grid;grid-template-columns:1fr 1fr;background:#0d1a27; }
.auth-visual { position:relative;overflow:hidden;display:flex;flex-direction:column;justify-content:flex-end;padding:60px 56px; }
.auth-visual__bg {
  position:absolute;inset:0;
  background: linear-gradient(160deg,rgba(26,111,168,.22) 0%,rgba(13,26,39,.88) 65%),
    url('https://images.unsplash.com/photo-1622560480605-d83c853bc5c3?w=900&h=1200&fit=crop') center/cover no-repeat;
  animation:panZoom 14s ease-in-out infinite alternate;
}
@keyframes panZoom { from{transform:scale(1.04);}to{transform:scale(1.1) translateY(-14px);} }
.auth-visual__overlay { position:absolute;inset:0;background:linear-gradient(to top,rgba(13,26,39,.93) 0%,rgba(13,26,39,.25) 55%,transparent 100%); }
.auth-visual__content { position:relative;z-index:2; }
.auth-visual__eyebrow { display:inline-flex;align-items:center;gap:10px;margin-bottom:20px; }
.auth-visual__eyebrow-line { display:block;width:32px;height:1.5px;background:var(--auth-gold); }
.auth-visual__eyebrow-text { font-size:.72rem;font-weight:600;letter-spacing:.22em;text-transform:uppercase;color:var(--auth-gold);font-family:var(--font-body); }
.auth-visual__title { font-family:var(--font-display);font-size:clamp(2.4rem,3.5vw,4rem);font-weight:400;color:#fff;line-height:1.15;margin:0 0 16px; }
.auth-visual__title em { color:var(--auth-gold);font-style:italic; }
.auth-visual__sub { font-size:.93rem;font-weight:300;color:rgba(255,255,255,.65);line-height:1.65;margin:0;max-width:320px;font-family:var(--font-body); }

.auth-form-panel { display:flex;align-items:center;justify-content:center;background:#f4f8fb;padding:60px 40px; }
.auth-form-card { width:100%;max-width:440px; }
.auth-form-card__logo { display:flex;align-items:center;gap:12px;margin-bottom:40px; }
.auth-form-card__logo-icon { width:44px;height:44px;background:var(--auth-accent);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0; }
.auth-form-card__logo-icon svg { width:22px;height:22px;fill:none;stroke:#fff;stroke-width:2; }
.auth-form-card__logo-text h2 { font-family:var(--font-display);font-size:1.4rem;font-weight:600;color:var(--auth-dark);margin:0;line-height:1.2; }
.auth-form-card__logo-text span { font-size:.72rem;letter-spacing:.15em;text-transform:uppercase;color:var(--auth-muted);font-family:var(--font-body); }

/* Step indicator */
.auth-step-header { text-align:center;margin-bottom:36px; }
.auth-step-icon {
  width:72px;height:72px;margin:0 auto 20px;
  background:linear-gradient(135deg,rgba(26,111,168,.1),rgba(26,111,168,.05));
  border:2px solid rgba(26,111,168,.18);border-radius:20px;
  display:flex;align-items:center;justify-content:center;
}
.auth-step-icon svg { width:32px;height:32px;stroke:var(--auth-accent);fill:none;stroke-width:1.8; }
.auth-step-header h1 { font-family:var(--font-display);font-size:2rem;font-weight:500;color:var(--auth-dark);margin:0 0 8px; }
.auth-step-header p { font-size:.88rem;color:var(--auth-muted);margin:0;font-family:var(--font-body);line-height:1.6; }

/* Steps visual row */
.auth-steps { display:flex;align-items:center;gap:0;margin-bottom:32px; }
.auth-step { flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;position:relative; }
.auth-step::after { content:'';position:absolute;top:16px;left:55%;width:90%;height:1.5px;background:#dde8f0; }
.auth-step:last-child::after { display:none; }
.auth-step__dot { width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.78rem;font-weight:700;font-family:var(--font-body);position:relative;z-index:1;border:2px solid #dde8f0;background:#fff;color:#aaa; }
.auth-step.active .auth-step__dot { background:var(--auth-dark);border-color:var(--auth-dark);color:#fff; }
.auth-step.done .auth-step__dot { background:var(--auth-accent);border-color:var(--auth-accent);color:#fff; }
.auth-step__label { font-size:.68rem;letter-spacing:.06em;text-transform:uppercase;color:#bbb;font-family:var(--font-body); }
.auth-step.active .auth-step__label { color:var(--auth-dark);font-weight:700; }

/* Field */
.auth-field { margin-bottom:22px; }
.auth-field label { display:block;font-size:.76rem;font-weight:700;text-transform:uppercase;letter-spacing:.09em;color:var(--auth-dark);margin-bottom:8px;font-family:var(--font-body); }
.auth-field__input-wrap { position:relative; }
.auth-field__input-wrap svg { position:absolute;left:14px;top:50%;transform:translateY(-50%);width:16px;height:16px;stroke:var(--auth-muted);fill:none;stroke-width:2;pointer-events:none;transition:stroke .25s; }
.auth-field input { width:100%;padding:13px 16px 13px 44px;border:1.5px solid var(--auth-border);border-radius:10px;font-size:.92rem;color:var(--auth-dark);background:#fff;outline:none;transition:border-color .25s,box-shadow .25s;font-family:var(--font-body);box-sizing:border-box; }
.auth-field input:focus { border-color:var(--auth-accent);box-shadow:0 0 0 3px rgba(26,111,168,.1); }

.auth-submit { width:100%;height:52px;background:var(--auth-dark);color:#fff;border:none;border-radius:10px;font-size:.88rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;cursor:pointer;transition:all .3s;font-family:var(--font-body);display:flex;align-items:center;justify-content:center;gap:10px;position:relative;overflow:hidden; }
.auth-submit::before { content:'';position:absolute;inset:0;background:var(--auth-accent);transform:translateX(-101%);transition:transform .4s cubic-bezier(.76,0,.24,1); }
.auth-submit:hover::before { transform:translateX(0); }
.auth-submit span,.auth-submit svg { position:relative;z-index:1; }
.auth-submit svg { width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:2.5;transition:transform .3s; }
.auth-submit:hover svg { transform:translateX(4px); }

.auth-messages { margin-bottom:16px; }
.auth-alert { display:flex;align-items:flex-start;gap:10px;padding:11px 14px;border-radius:8px;font-size:.84rem;font-family:var(--font-body);margin-bottom:8px; }
.auth-alert--error { background:#fff0f0;border:1px solid #ffd0d0;color:#8a1c1c; }
.auth-alert--success { background:#f0fdf4;border:1px solid #bbf0cc;color:#166534; }
.auth-alert svg { width:15px;height:15px;flex-shrink:0;stroke:currentColor;fill:none;stroke-width:2; }

.auth-alt { text-align:center;font-size:.88rem;color:var(--auth-muted);font-family:var(--font-body);margin-top:24px; }
.auth-alt a { color:var(--auth-accent);font-weight:700;text-decoration:none; }
.auth-alt a:hover { text-decoration:underline; }

@media (max-width:900px) { .auth-page{grid-template-columns:1fr;}.auth-visual{display:none;} }
@media (max-width:480px) { .auth-form-panel{padding:28px 16px;} }
</style>
{% endblock %}

{% block content %}
<div class="auth-page">
  <div class="auth-visual">
    <div class="auth-visual__bg"></div>
    <div class="auth-visual__overlay"></div>
    <div class="auth-visual__content">
      <div class="auth-visual__eyebrow">
        <span class="auth-visual__eyebrow-line"></span>
        <span class="auth-visual__eyebrow-text">Account Recovery</span>
      </div>
      <h2 class="auth-visual__title">Reset Your<br><em>Password.</em></h2>
      <p class="auth-visual__sub">
        No worries — it happens to everyone. Enter your email and we'll send you a secure link to reset your password in minutes.
      </p>
    </div>
  </div>

  <div class="auth-form-panel">
    <div class="auth-form-card">
      <div class="auth-form-card__logo">
        <div class="auth-form-card__logo-icon">
          <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
        </div>
        <div class="auth-form-card__logo-text">
          <h2>Al Ameen Optics</h2>
          <span>Your Vision Matters More</span>
        </div>
      </div>

      <!-- Progress steps -->
      <div class="auth-steps">
        <div class="auth-step active">
          <div class="auth-step__dot">1</div>
          <span class="auth-step__label">Email</span>
        </div>
        <div class="auth-step">
          <div class="auth-step__dot">2</div>
          <span class="auth-step__label">Link sent</span>
        </div>
        <div class="auth-step">
          <div class="auth-step__dot">3</div>
          <span class="auth-step__label">New password</span>
        </div>
      </div>

      <div class="auth-step-header">
        <div class="auth-step-icon">
          <svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <h1>Forgot password?</h1>
        <p>Enter your registered email and we'll send you a reset link</p>
      </div>

      {% if messages %}
      <div class="auth-messages">
        {% for message in messages %}
        <div class="auth-alert auth-alert--{{ message.tags }}">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}

      <form method="POST" action="{% url 'users:forgot_password' %}">
        {% csrf_token %}
        <div class="auth-field">
          <label for="email">Email Address</label>
          <div class="auth-field__input-wrap">
            <input type="email" name="email" id="email" placeholder="you@example.com" required autocomplete="email">
            <svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
          </div>
        </div>
        <button type="submit" class="auth-submit">
          <span>Send Reset Link</span>
          <svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        </button>
      </form>

      <div class="auth-alt">
        Remembered it? <a href="{% url 'users:login' %}">← Back to Sign In</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}